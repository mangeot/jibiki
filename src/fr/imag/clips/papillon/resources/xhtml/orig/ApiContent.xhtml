<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Papillon</title>
</head>

<body>

<div id="ApiContent" lang="en" xml:lang="en">
<h1 style="text-align:center">jibiki REST Application Programming Interface</h1>
<h2>Summary</h2>

<h3>List of available dictionaries</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/</td></tr>
    <tr><td>Method</td><td>GET</td></tr>
    <tr><td>Returns</td><td>200 OK &amp; XML (list of dictionaries metadata)</td></tr>
 </tbody>
</table>

<h3>Description of a dictionary</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/[dictionary]/</td></tr>
    <tr><td>Method</td><td>GET</td></tr>
     <tr><td rowspan="2">Returns</td><td>200 OK &amp; XML (dictionary metadata)</td></tr>
    <tr><td>404 Not Found</td></tr>
 </tbody>
</table>

<h3>Description of a volume</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/[dictionary]/[lang]/</td></tr>
    <tr><td>Method</td><td>GET</td></tr>
    <tr><td rowspan="2">Returns</td><td>200 OK &amp; XML (volume metadata)</td></tr>
    <tr><td>404 Not Found</td></tr>
 </tbody>
</table>

<h3>Requesting an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td >GET</td></tr>
    <tr><td rowspan="2">Returns</td><td >200 OK &amp; XML (entry)</td></tr>
    <tr><td>404 Not Found</td></tr>
 </tbody>
</table>

<h3>Modifying an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td colspan="2">api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td colspan="2">PUT</td></tr>
    <tr><td rowspan="2">Querystring</td><td>login=</td><td>login</td></tr>
    <tr><td>password=</td><td>password</td></tr>
    <tr><td rowspan="3">Returns</td><td colspan="2">201 Created &amp; XML (entry)</td></tr>
    <tr><td colspan="2">401 Unauthorized</td></tr>
    <tr><td colspan="2">404 Not Found</td></tr>
 </tbody>
</table>

<p>Note: the user has to be logged and in the specialist group.</p>

<h3>Creating an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td colspan="2">api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td colspan="2">POST</td></tr>
    <tr><td rowspan="2">Querystring</td><td>login=</td><td>login</td></tr>
    <tr><td>password=</td><td>password</td></tr>
    <tr><td rowspan="2">Returns</td><td colspan="2">201 Created &amp; XML (entry)</td></tr>
    <tr><td colspan="2">401 Unauthorized</td></tr>
 </tbody>
</table>

<p>Note: the user has to be logged and in the validator group.</p>

<h3>Deleting an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td colspan="2">api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td colspan="2">DELETE</td></tr>
    <tr><td rowspan="2">Querystring</td><td>login=</td><td>login</td></tr>
    <tr><td>password=</td><td>password</td></tr>
    <tr><td rowspan="3">Returns</td><td colspan="2">204 No Content &amp; XML (entry)</td></tr>
    <tr><td colspan="2">401 Unauthorized</td></tr>
    <tr><td colspan="2">404 Not Found</td></tr>
 </tbody>
</table>

<p>Note: the user has to be logged and in the admin group.</p>

<h3>Querying entries</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td colspan="2">api/[dictionary]/[lang]/[criteria]/[string]</td></tr>
    <tr><td>Method</td><td colspan="2">GET</td></tr>
    <tr><td rowspan="3">Querystring</td><td>strategy=</td><td>strategy</td></tr>
    <tr><td>count=</td><td>count</td></tr>
    <tr><td>startIndex=</td><td>startIndex</td></tr>
    <tr><td rowspan="2">Returns</td><td colspan="2">200 OK &amp; XML (entry)</td></tr>
    <tr><td colspan="2">404 Not Found</td></tr>
 </tbody>
</table>

<p>Criteria is one of the following:</p>

<table class="api">
 <tbody>
    <tr><td>handle</td><td>unique entry handle specific to the server database</td></tr>
    <tr><td>cdm-entry-id</td><td>entry id</td></tr>
    <tr><td>cdm-headword</td><td>entry headword</td></tr>
    <tr><td>cdm-headword-variant</td><td>entry headword variant</td></tr>
    <tr><td>cdm-reading</td><td>entry headword reading (ex: japanese kana)</td></tr>
    <tr><td>cdm-writing</td><td>entry headword transcription (ex: pinyin for Chinese)</td></tr>
    <tr><td>cdm-pronunciation</td><td>entry headword pronunciation (Usually in IPA but it depends on the resource)</td></tr>
    <tr><td>cdm-pos</td><td>entry part-of-speech (can be "n", "noun", etc. It depends on the resource)</td></tr>
    <tr><td>cdm-translation</td><td>entry headword translation in another language</td></tr>
    <tr><td>cdm-example</td><td>entry examples</td></tr>
    <tr><td>cdm-idiom</td><td>entry idioms</td></tr>
    <tr><td>cdm-contribution-id</td><td>contribution id</td></tr>
    <tr><td>cdm-contribution-author</td><td>contribution author</td></tr>
    <tr><td>cdm-contribution-creation-date</td><td>contribution creation date</td></tr>
    <tr><td>cdm-contribution-finition-date</td><td>contribution finition date</td></tr>
    <tr><td>cdm-contribution-status</td><td>contribution status</td></tr>
 </tbody>
</table>

<p>Note: the criteria depends on the resource. A criteria might not be available for one specific resource.
Other criteria not in the list may exist only for one specific resource.</p>

<p>cdm stands for Common dictionary Markup</p>

<p>Strategy is one of the following:</p>

<table class="api">
 <tbody>
    <tr><td>EQUAL</td><td>indexed search</td></tr>
    <tr><td>CASE_SENSITIVE_STARTS_WITH</td><td>indexed search</td></tr>
    <tr><td>CASE_SENSITIVE_ENDS_WITH</td><td>sequential search</td></tr>
    <tr><td>CASE_SENSITIVE_CONTAINS</td><td>sequential search</td></tr>
    <tr><td>CASE_INSENSITIVE_EQUAL</td><td>indexed search</td></tr>
    <tr><td>CASE_INSENSITIVE_STARTS_WITH</td><td>indexed search</td></tr>
    <tr><td>CASE_INSENSITIVE_ENDS_WITH</td><td>sequential search</td></tr>
    <tr><td>CASE_INSENSITIVE_CONTAINS</td><td>sequential search</td></tr>
    <tr><td>NOT_EQUAL</td><td>indexed search</td></tr>
    <tr><td>GREATER_THAN</td><td>indexed search</td></tr>
    <tr><td>GREATER_THAN_OR_EQUAL</td><td>indexed search</td></tr>
    <tr><td>LESS_THAN</td><td>indexed search</td></tr>
    <tr><td>LESS_THAN_OR_EQUAL</td><td>indexed search</td></tr>
 </tbody>
</table>

<ul>
	<li>All the answers are in XML and encoded in UTF-8.</li>
	<li><em>lang</em> is the ISO 639-2/T 3 letter code of the language (eg: 'eng' for English,'esp' for Spanish,'fra' for French, etc.)</li>
	<li>All parameters are case sensitive (dictionary, contributionId, string, etc.)</li>
</ul>
 
<h2>Misc</h2>
<p>If you need more help, send an email to
<a href="mailto:mathieu.mangeotATimag.fr?subject=jibikiServer&amp;body=replace&nbsp;AT&nbsp;by&nbsp;@&nbsp;in&nbsp;the&nbsp;email&nbsp;address">Mathieu Mangeot-Nagata</a>.</p>
</div>
</body>
</html>
