<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Papillon</title>
</head>

<body>

<div id="ApiContent" lang="en" xml:lang="en">
<h1 style="text-align:center">jibiki REST Application Programming Interface</h1>
<h2>Summary</h2>

<h3>List of available dictionaries</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/</td></tr>
    <tr><td>Method</td><td>GET</td></tr>
    <tr><td>Returns</td><td>200 OK &amp; XML (list of dictionaries metadata)</td></tr>
 </tbody>
</table>

<h3>Description of a dictionary</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/[dictionary]/</td></tr>
    <tr><td>Method</td><td>GET</td></tr>
     <tr><td rowspan="2">Returns</td><td>200 OK &amp; XML (dictionary metadata)</td></tr>
    <tr><td>404 Not Found</td></tr>
 </tbody>
</table>

<h3>Description of a volume</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/[dictionary]/[lang]/</td></tr>
    <tr><td>Method</td><td>GET</td></tr>
    <tr><td rowspan="2">Returns</td><td>200 OK &amp; XML (volume metadata)</td></tr>
    <tr><td>404 Not Found</td></tr>
 </tbody>
</table>

<h3>Requesting an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td >GET</td></tr>
    <tr><td rowspan="2">Returns</td><td >200 OK &amp; XML (entry)</td></tr>
    <tr><td>404 Not Found</td></tr>
 </tbody>
</table>

<h3>Modifying an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td colspan="2">api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td colspan="2">PUT</td></tr>
    <tr><td rowspan="2">Querystring</td><td>login=</td><td>login</td></tr>
    <tr><td>password=</td><td>password</td></tr>
    <tr><td rowspan="3">Returns</td><td colspan="2">201 Created &amp; XML (entry)</td></tr>
    <tr><td colspan="2">401 Unauthorized</td></tr>
    <tr><td colspan="2">404 Not Found</td></tr>
 </tbody>
</table>

<p>Note: the user has to be logged and in the specialist group.</p>

<h3>Creating an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td colspan="2">api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td colspan="2">POST</td></tr>
    <tr><td rowspan="2">Querystring</td><td>login=</td><td>login</td></tr>
    <tr><td>password=</td><td>password</td></tr>
    <tr><td rowspan="2">Returns</td><td colspan="2">201 Created &amp; XML (entry)</td></tr>
    <tr><td colspan="2">401 Unauthorized</td></tr>
 </tbody>
</table>

<p>Note: the user has to be logged and in the validator group.</p>

<h3>Deleting an entry</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td colspan="2">api/[dictionary]/[lang]/[contributionId]</td></tr>
    <tr><td>Method</td><td colspan="2">DELETE</td></tr>
    <tr><td rowspan="2">Querystring</td><td>login=</td><td>login</td></tr>
    <tr><td>password=</td><td>password</td></tr>
    <tr><td rowspan="3">Returns</td><td colspan="2">204 No Content &amp; XML (entry)</td></tr>
    <tr><td colspan="2">401 Unauthorized</td></tr>
    <tr><td colspan="2">404 Not Found</td></tr>
 </tbody>
</table>

<p>Note: the user has to be logged and in the admin group.</p>

<h3>Querying entries</h3>

<table class="api">
 <tbody>
    <tr><td>URL</td><td>api/[dictionary]/[lang]/[criteria]/[string]</td></tr>
    <tr><td>Method</td><td>GET</td></tr>
    <tr><td rowspan="2">Returns</td><td>200 OK &amp; XML (entry)</td></tr>
    <tr><td>404 Not Found</td></tr>
 </tbody>
</table>

<p>Criteria is one of the following:</p>

<table class="api">
 <tbody>
    <tr><td>prefix</td><td>headword prefix</td></tr>
    <tr><td>handle</td><td>entry handle</td></tr>
 </tbody>
</table>

<ul>
	<li>All the answers are in XML and encoded in UTF-8.</li>
	<li><em>lang</em> is the ISO 639-2/T 3 letter code of the language (eg: 'eng' for English,'esp' for Spanish,'fra' for French, etc.)</li>
	<li>All parameters are case sensitive (dictionary, contributionId, string, etc.)</li>
</ul>
 
<h2>Misc</h2>
<p>If you need more help, send an email to
<a href="mailto:mathieu.mangeotATimag.fr?subject=jibikiServer&amp;body=replace&nbsp;AT&nbsp;by&nbsp;@&nbsp;in&nbsp;the&nbsp;email&nbsp;address">Mathieu Mangeot-Nagata</a>.</p>
</div>
</body>
</html>
