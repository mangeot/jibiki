<?xml version="1.0" encoding="UTF-8"?>

<project name="generateDods" default="compileJava">
<property name="enhydra.root" value="null"/>
<property name="dods.conf" value="/Users/yingzhang/Projet/Jibiki/toolsforjibiki/enhydra5.1/dods/build/conf/dodsConf.xml"/>

<property name="project.name" value="papillon_static_objects"/>
<property name="doml.filename" value="papillon_static_objects.doml"/>
<property name="project.root" value="/Users/yingzhang/Projet/LINKS_1_0/build/Dods_Generated_Sources/static"/>
<property name="database.vendor" value="PostgreSQL"/>
<property name="database.splitsqlprimary" value="true"/>
<property name="temp.dir" value="ejen_temp"/>
<property name="template.dir" value="/Users/yingzhang/Projet/Jibiki/toolsforjibiki/enhydra5.1/dods/build/template"/>
<property name="template.set" value="standard"/>

    
	<!-- ==================================================================================== -->

	<taskdef name="ejen" classname="org.ejen.EjenTask"/>
	<taskdef name="DODS_XMLBuilder" classname="org.enhydra.ant.taskdefs.DODS_XMLBuilder"/>
	<taskdef name="sqlsplitter" classname="org.enhydra.ant.taskdefs.SQLSplitterTask"/>

	<!-- ==================================================================================== -->


	
	<target name="validate" >
		<xmlvalidate file="${project.root}/${doml.filename}" warn="yes" 
	         classname="org.apache.xerces.parsers.SAXParser" 
	         classpath="${enhydra.root}/lib/xercesImpl.jar">
   	</xmlvalidate>
	</target>

	<target name="dods" depends="validate">
		<DODS_XMLBuilder doml="${project.root}/${doml.filename}"
	   			outdir="${project.root}"
	   			database="${database.vendor}"
	   			/>
	</target>
	
	
	<target name="prepareSQL">
		<ejen stacktrace="true">
			<source file="${project.root}/${doml.filename}"/>
			<template file="${template.dir}/${template.set}/sql/prepareSQL.xsl"/>
		</ejen>
	</target>
	


	<target name="createSQLs">
		<ejen stacktrace="true">
			<source file="${project.root}/${doml.filename}"/>
			<template file="${template.dir}/${template.set}/sql/createSQLs.xsl"/>
		</ejen>
	</target>

	<target name="sqlsplitter" >
		<sqlsplitter dir="${project.root}"
	   			resultsql="${project.root}/${project.name}.sql"
	   			splitsqlprimary="${database.splitsqlprimary}"
	   			/>
	</target>

	<target name="generateAll" >
  		<ant antfile="${project.root}/build_dods.xml" target="generateSql"/>
      <ant antfile="${project.root}/build_java.xml" target="generate_all"/>
      <ant antfile="${project.root}/build_dods.xml" target="compileJava"/>
	</target>

	<target name="generateAllSplit" >
  		<ant antfile="${project.root}/build_dods.xml" target="generateSqlSplit"/>
      <ant antfile="${project.root}/build_java.xml" target="generate_all"/>
      <ant antfile="${project.root}/build_dods.xml" target="compileJava"/>
	</target>

	<target name="generateSql" depends="dods,prepareSQL">
      <ant antfile="${project.root}/build_sql.xml" target="generateSql"/>
      <ant antfile="${project.root}/build_dods.xml" target="createSQLs"/>
	</target>

	<target name="generateSqlSplit" depends="dods,prepareSQL">
      <ant antfile="${project.root}/build_sql.xml" target="generateSql"/>
      <ant antfile="${project.root}/build_dods.xml" target="sqlsplitter"/>
	</target>

	<target name="generateJava" depends="dods">
      <ant antfile="${project.root}/build_java.xml" target="generate_all"/>
      <ant antfile="${project.root}/build_dods.xml" target="compileJava"/>
	</target>
	
	<target name="generateJavaNoCompile" depends="dods">
      <ant antfile="${project.root}/build_java.xml" target="generate_all"/>
	</target>
	
	<target name="generateNoCompile" depends="generateSql">
      <ant antfile="${project.root}/build_java.xml" target="generate_all"/>
	</target>
	
	<target name="generateNoCompileSplit" depends="generateSqlSplit">
      <ant antfile="${project.root}/build_java.xml" target="generate_all"/>
	</target>
	
	
	<target name="compileJava">
     <mkdir dir="${project.root}/classes"/>
     <javac srcdir="${project.root}" destdir="${project.root}/classes" deprecation="off" fork="yes" memoryInitialSize="80m" memoryMaximumSize="800m" nowarn="yes"/>
	 <copy todir="${project.root}/classes/org/enhydra/dods" includeEmptyDirs="no">
	     <fileset dir="${project.root}/org/enhydra/dods">
	          <include name="DODSClassList.xml"/>
	     </fileset>
	 </copy>
	
	</target>

	

	<!-- ================================================================================ -->

</project>



